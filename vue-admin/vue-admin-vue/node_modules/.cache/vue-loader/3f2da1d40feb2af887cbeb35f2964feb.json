{"remainingRequest":"D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\src\\views\\Login.vue","mtime":1648710825850},{"path":"D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1620148001861},{"path":"D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1620148001577},{"path":"D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1620148001861},{"path":"D:\\software_ware\\workspace_idea\\grower\\vue-admin\\vue-admin-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1620148009005}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBxcyBmcm9tICdxcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVsZUxvZ2luRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAnYWRtaW4nLAogICAgICAgIHBhc3N3b3JkOiAnMTIzNDU2JywKICAgICAgICBjb2RlOiAnJywKICAgICAgICBrZXk6ICcnLAogICAgICAgIGNvZGVCYXNlNjRJbWFnZTogJycsCiAgICAgIH0sCiAgICAgIHJ1bGVMb2dpbjogewogICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5a+G56CBJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGNvZGU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXpqozor4HnoIEnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDUsCiAgICAgICAgICAgIG1heDogNSwKICAgICAgICAgICAgbWVzc2FnZTogJ+mVv+W6puS4uiA1IOS4quWtl+espicsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgY2hlY2tlZDogdHJ1ZSwKICAgICAgY29kZUJhc2U2NEltYWdlOiBudWxsLAogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhcHRjaGEoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0ocnVsZUxvZ2luRm9ybSkgewogICAgICB0aGlzLiRyZWZzW3J1bGVMb2dpbkZvcm1dLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2RvTG9naW4/JyArIHFzLnN0cmluZ2lmeSh0aGlzLnJ1bGVMb2dpbkZvcm0pKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgLy8gMS5Qb3N06K+35rGC77ya6I635Y+Wand05bm25a2Y5pS+5YiwdnVleAogICAgICAgICAgICBjb25zdCBqd3QgPSByZXMuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX1RPS0VOJywgand0KQoKICAgICAgICAgICAgLy8gMi5HZXTor7fmsYLvvJrojrflj5Z1c2VySW5mb+W5tuWtmOaUvuWIsHZ1ZXgKICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KCcvc3lzL3VzZXIvaW5mbycpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX1VTRVJJTkZPJywgcmVzLmRhdGEuZGF0YSkKCiAgICAgICAgICAgICAgLy8gMy7ot7PovazkuLvpobUKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIHJlc2V0Rm9ybShydWxlTG9naW5Gb3JtKSB7CiAgICAgIHRoaXMuJHJlZnNbcnVsZUxvZ2luRm9ybV0ucmVzZXRGaWVsZHMoKQogICAgfSwKCiAgICBnZXRDYXB0Y2hhKCkgewogICAgICB0aGlzLiRheGlvcy5nZXQoJy9jYXB0Y2hhJykudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5ydWxlTG9naW5Gb3JtLmtleSA9IHJlcy5kYXRhLmRhdGEua2V5CiAgICAgICAgdGhpcy5ydWxlTG9naW5Gb3JtLmNvZGVCYXNlNjRJbWFnZSA9IHJlcy5kYXRhLmRhdGEuY29kZUJhc2U2NEltYWdlCiAgICAgICAgdGhpcy5ydWxlTG9naW5Gb3JtLmNvZGUgPSAnJwogICAgICAgIC8vIOaWueS+v+Whq+WGmSDpqozor4HnoIEKICAgICAgICB0aGlzLnJ1bGVMb2dpbkZvcm0uY29kZSA9IHJlcy5kYXRhLmRhdGEuY29kZQogICAgICB9KQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 【Form 表单：自定义校验规则】 -->\n    <el-form ref=\"ruleLoginForm\" :rules=\"ruleLogin\" :model=\"ruleLoginForm\" class=\"loginContainer\">\n      <h3 class=\"loginTitle\">用户登录</h3>\n\n      <el-form-item prop=\"username\">\n        <el-input\n          v-model=\"ruleLoginForm.username\"\n          size=\"normal\"\n          type=\"text\"\n          auto-complete=\"off\"\n          placeholder=\"请输入用户名\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"password\">\n        <el-input\n          v-model=\"ruleLoginForm.password\"\n          size=\"normal\"\n          type=\"password\"\n          auto-complete=\"off\"\n          placeholder=\"请输入密码\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"code\">\n        <el-input\n          v-model=\"ruleLoginForm.code\"\n          maxlength=\"5\"\n          style=\"width: 262px; float: left\"\n        ></el-input>\n        <el-image\n          :src=\"ruleLoginForm.codeBase64Image\"\n          class=\"codeBase64Image\"\n          @click=\"getCaptcha\"\n        ></el-image>\n      </el-form-item>\n\n      <!-- 【Checkbox 多选框：基础用法】 -->\n      <el-checkbox v-model=\"checked\" size=\"normal\" class=\"loginRemember\">点击记住我</el-checkbox>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('ruleLoginForm')\">登录</el-button>\n        <el-button @click=\"resetForm('ruleLoginForm')\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport qs from 'qs'\n\nexport default {\n  name: 'Login',\n\n  data() {\n    return {\n      ruleLoginForm: {\n        username: 'admin',\n        password: '123456',\n        code: '',\n        key: '',\n        codeBase64Image: '',\n      },\n      ruleLogin: {\n        username: [\n          {\n            required: true,\n            message: '请输入用户名',\n            trigger: 'blur',\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: '请输入密码',\n            trigger: 'blur',\n          },\n        ],\n        code: [\n          {\n            required: true,\n            message: '请输入验证码',\n            trigger: 'blur',\n          },\n          {\n            min: 5,\n            max: 5,\n            message: '长度为 5 个字符',\n            trigger: 'blur',\n          },\n        ],\n      },\n      checked: true,\n      codeBase64Image: null,\n    }\n  },\n\n  created() {\n    this.getCaptcha()\n  },\n\n  methods: {\n    submitForm(ruleLoginForm) {\n      this.$refs[ruleLoginForm].validate((valid) => {\n        if (valid) {\n          this.$axios.post('/doLogin?' + qs.stringify(this.ruleLoginForm)).then((res) => {\n            // 1.Post请求：获取jwt并存放到vuex\n            const jwt = res.headers['authorization']\n            this.$store.commit('SET_TOKEN', jwt)\n\n            // 2.Get请求：获取userInfo并存放到vuex\n            this.$axios.get('/sys/user/info').then((res) => {\n              this.$store.commit('SET_USERINFO', res.data.data)\n\n              // 3.跳转主页\n              this.$router.push('/')\n            })\n          })\n        } else {\n          return false\n        }\n      })\n    },\n\n    resetForm(ruleLoginForm) {\n      this.$refs[ruleLoginForm].resetFields()\n    },\n\n    getCaptcha() {\n      this.$axios.get('/captcha').then((res) => {\n        this.ruleLoginForm.key = res.data.data.key\n        this.ruleLoginForm.codeBase64Image = res.data.data.codeBase64Image\n        this.ruleLoginForm.code = ''\n        // 方便填写 验证码\n        this.ruleLoginForm.code = res.data.data.code\n      })\n    },\n  },\n}\n</script>\n\n<style>\n.loginContainer {\n  border-radius: 15px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 15px 35px 15px 35px;\n  background: #fff;\n  border: 1px solid #eaeaea;\n  box-shadow: 0 0 25px #cac6c6;\n}\n\n.loginTitle {\n  margin: 15px auto 20px auto;\n  text-align: center;\n}\n\n.loginRemember {\n  text-align: left;\n  margin: 0px 0px 15px 0px;\n}\n\n.codeBase64Image {\n  width: 80px;\n  float: left;\n  margin-left: 8px;\n  border-radius: 4px;\n}\n</style>\n"]}]}